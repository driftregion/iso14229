# common --toolchain_resolution_debug='@bazel_tools//tools/cpp:toolchain_type'

build --strip=never
build --workspace_status_command=tools/workspace_status.sh
build --stamp

# Hermetic LLVM toolchain with Debian Bullseye sysroot (includes isotp headers)
common:hermetic-llvm --extra_toolchains @llvm_toolchain//:cc-toolchain-x86_64-linux
common:hermetic-llvm --platforms=//platforms:x86_64_clang

# Hermetic fuzzing configuration with LibFuzzer
common:hermetic-fuzz --config=hermetic-llvm
common:hermetic-fuzz --@rules_fuzzing//fuzzing:cc_engine=@rules_fuzzing//fuzzing/engines:libfuzzer
common:hermetic-fuzz --@rules_fuzzing//fuzzing:cc_engine_instrumentation=libfuzzer
common:hermetic-fuzz --@rules_fuzzing//fuzzing:cc_engine_sanitizer=asan

# Hermetic coverage configuration
common:hermetic-coverage --config=hermetic-llvm
common:hermetic-coverage --@rules_fuzzing//fuzzing:cc_engine=@rules_fuzzing//fuzzing/engines:replay
common:hermetic-coverage --@rules_fuzzing//fuzzing:cc_engine_instrumentation=none
common:hermetic-coverage --@rules_fuzzing//fuzzing:cc_engine_sanitizer=none
common:hermetic-coverage --instrument_test_targets
common:hermetic-coverage --experimental_collect_code_coverage_for_generated_files
common:hermetic-coverage --combined_report=lcov
common:hermetic-coverage --action_env=BAZEL_USE_LLVM_NATIVE_COVERAGE=1
common:hermetic-coverage --action_env=GCOV=llvm-profdata
common:hermetic-coverage --action_env=BAZEL_LLVM_COV=llvm-cov
common:hermetic-coverage --experimental_use_llvm_covmap
common:hermetic-coverage --experimental_generate_llvm_lcov
common:hermetic-coverage --java_runtime_version=remotejdk_11
